package dev.kirro.extendedcombat.effects.custom;

import dev.kirro.extendedcombat.behavior.enchantment.AirJumpBehavior;
import dev.kirro.extendedcombat.behavior.enchantment.BlinkBehavior;
import dev.kirro.extendedcombat.behavior.enchantment.DashBehavior;
import dev.kirro.extendedcombat.entity.components.ModEntityComponents;
import net.minecraft.entity.LivingEntity;
import net.minecraft.entity.effect.StatusEffect;
import net.minecraft.entity.effect.StatusEffectCategory;
import net.minecraft.entity.player.PlayerEntity;

public class VulnerabilityStatusEffect extends StatusEffect {
    public VulnerabilityStatusEffect(StatusEffectCategory category, int color) {
        super(category, color);
    }

    @Override
    public boolean applyUpdateEffect(LivingEntity entity, int amplifier) {
        if (entity instanceof PlayerEntity player) {
            AirJumpBehavior jump = ModEntityComponents.AIR_JUMP.get(player);
            DashBehavior dash = ModEntityComponents.DASH.get(player);
            BlinkBehavior blink = ModEntityComponents.BLINK.get(player);

            jump.reset();
            dash.reset();
            dash.resetWithElytra();
            blink.reset();
        }
        return super.applyUpdateEffect(entity, amplifier);
    }
}
